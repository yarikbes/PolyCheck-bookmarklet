/* Version 1.2.6 Minified | Author: @yarikbes (https://www.linkedin.com/in/yaroslav-rudyi/) with Gemini */(function(){alert("Букмарклет PolyCheck запущен");const e=["casino bonus","jackpot","cashback","no deposit bonus","withdrawal","balance","live","vip","account","bet","spin","mobile","bonus code","promo code","free spins","rakeback","reload bonus","welcome package","wagering requirements","minimum deposit","bonus funds","bonus percentage","bonus terms","bonus validity","matched deposit","matched reward","tailored offer","activate bonus","claim bonus","exclusive promotion","valid promo code","private event","highroller","cash out","registration bonus","promotions","wagering requirements","rtp","return to player","payout"],t=e.map(e=>e.toLowerCase()),n={"en-US":["favorite","color","center","organize","analyze","license","program","catalog"],"en-GB":["favourite","colour","centre","organise","analyse","licence","programme","catalogue"],"pt-PT":["prémio","levantamento","apoio ao cliente","reembolso"],"pt-BR":["prêmio","saque","atendimento ao cliente"],"es-ES":["máquina tragamonedas","dinero","trabajo","hola"],"es-AR":["tragamonedas","guita","laburo","che","boludo"],"de-DE":["spielautomat","lizenz","glücksspielstaatsvertrag"],"de-AT/CH":["glücksspielautomat","konzession","glücksspielgesetz","geldspielgesetz"],"fr-FR":["mise","retrait","joueur"],"fr-CA":["pari","encaissement","joueuse"],"sv-SE":["spel","insättning","uttag","vinst"],"nl-NL":["gokken","inzet","uitbetaling"]},r={"en-US":["wager","cashout","reels","multiplier","wagering requirement","rtp"],"en-GB":["stake","payline","punt","punter","return to player"],"pt-PT":["slot machine","caça-níquel","jogos de sorte","giros grátis","saldo","levantamento mínimo"],"pt-BR":["cassino","jogos de azar","aposta mínima","giros grátis","saldo"],"es-ES":["bote","tiradas gratis","retiro","servicio de atención al cliente","apuesta mínima","juego de mesa","crupier","tragaperras"],"es-AR":["pozo","giros gratis","extracción","cobro","saque","retirar","apuestas deportivas"],"de-DE":["einsatz","auszahlung","freispiele","wettquote","mindesteinsatz","spielregeln","bonusspiel"],"de-AT/CH":["einsatzgrenze","auszahlungen","wette","wettanbieter","spielregeln","bonusspiel"],"sv-SE":["spelautomater","insättning","uttag","vinster","jackpott","kampanjer","betalningsmetoder"],"nl-NL":["gokkasten","welkomstbonus","gratis spins","uitbetaling","storting","klantenservice","mobiel casino","betalningsmethoden"],"fr-FR":["mise","retrait","joueur","pari"],"fr-CA":["pari","encaissement","joueuse","mise","gain"]},i=["free-spins","high-rollers","non-sticky","live-dealer","e-sports","real-time","in-play","pre-match","live-streaming","multi-bets","single-bets","match-winner","first-tower","dragon-slay","bonus-crab","event-based","user-friendly","real-money","mobile-optimized","top-tier","high-volatility","live-betting","fast-paced","must-try","high-end","must-play","time-limited","high-stakes","stand-alone","non-stop","blockbuster"].map(e=>e.toLowerCase()),o={"en-GB":"GBP","en-US":"USD","pt-PT":"EUR","pt-BR":"BRL","es-ES":"EUR","es-AR":"ARS","de-DE":"EUR","de-AT/CH":"EUR","fr-FR":"EUR","fr-CA":"CAD","sv-SE":"SEK","nl-NL":"EUR"};function a(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}async function s(){try{const e=await navigator.clipboard.readText();if(e&&e.trim())return e;alert("Буфер обмена пуст. Выделите текст, скопируйте его (Ctrl+C или Cmd+C) и запустите букмарклет снова.");return""}catch(e){console.warn("Не удалось прочитать буфер обмена:",e);const t=prompt("Не удалось прочитать буфер обмена. Пожалуйста, вставьте текст сюда (Ctrl+V или Cmd+V):","");if(t&&t.trim())return t;alert("Текст не был введён. Попробуйте снова.");return""}}function c(e){const t={wordMarkerStats:{counts:{},words:{}},orthoMarkerStats:{counts:{},words:{}},isIGamingText:!1,duplicateWords:[],duplicateSentences:new Set,potentialTypos:new Set,hasEnDash:!1,foundCurrencies:{},currencyReportStrings:[]},n=e.split(/\s+/);t.isIGamingText=e.some((e=>{const t=new RegExp("\\b"+a(e)+"\\b","gi");return t.test(e)}));for(const e in r){t.wordMarkerStats.counts[e]=0,t.wordMarkerStats.words[e]=[];r[e].forEach(n=>{const r=new RegExp("\\b"+a(n)+"\\b","gi"),i=e.match(r);i&&(t.isIGamingText||t.includes(n.toLowerCase()))&&(t.wordMarkerStats.counts[e]+=i.length,t.wordMarkerStats.words[e].push(`${n} (${i.length})`))})}for(const e in n){t.orthoMarkerStats.counts[e]=0,t.orthoMarkerStats.words[e]=[];n[e].forEach(r=>{const i=new RegExp("\\b"+a(r)+"\\b","gi"),o=e.match(i);o&&(t.orthoMarkerStats.counts[e]+=o.length,t.orthoMarkerStats.words[e].push(`${r} (${o.length})`))})}for(let e=0;e<n.length-1;e++){const r=n[e].toLowerCase().replace(/[.,;:!?]$/,""),i=n[e+1].toLowerCase().replace(/[.,;:!?]$/,"");r&&r===i&&r.length>2&&t.duplicateWords.push(`${n[e]} ${n[e+1]}`)}const s=e.split(/[.!?]+/).map(e=>e.trim().toLowerCase()).filter(e=>e.length>10),c={};s.forEach(e=>{c[e]=(c[e]||0)+1});for(const e in c)c[e]>1&&t.duplicateSentences.add(e);n.forEach((e,n)=>{const r=e.replace(/[.,;:!?]$/,"");/[#@$]/.test(r)&&!r.match(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/)&&!r.startsWith("#")&&t.potentialTypos.add(e),/-/.test(e)&&(i.includes(e.toLowerCase())||e.match(/^-\S|\S-$/)||e.includes(" -")||e.includes("- "))&&t.potentialTypos.add(e),/((?:\w+)(?:[^-\s\w,.!?;:'"]+)(?:\w+)?)|((?:\w+)(?:[^-\s\w,.!?;:'"]+)\s)|(?:[^-\s\w,.!?;:'"]+(?:\w+))/.test(e)&&!i.includes(e.toLowerCase())&&!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e)&&!e.startsWith("http")&&t.potentialTypos.add(e)}),t.hasEnDash=/–/g.test(e);const l=[...new Set(Object.values(o))];l.forEach(e=>{const n=new RegExp(`(\\b${e}\\b(?:\\s*\\d+(?:[.,]\\d+)?)?|\\d+(?:[.,]\\d+)?\\s*\\b${e}\\b|\\p{Sc}\\s*\\d+(?:[.,]\\d+)?|\\d+(?:[.,]\\d+)?\\s*\\p{Sc})`,"gu"),r=(e.match(n)||[]).filter((t,n,r)=>r.indexOf(t)===n);let i=0,s=[];r.forEach(t=>{let n=!1;t.toLowerCase().includes(e.toLowerCase())?n=!0:e==="GBP"&&t.includes("£")?n=!0:e==="USD"&&t.includes("$")?n=!0:e==="EUR"&&t.includes("€")?n=!0:e==="BRL"&&t.toLowerCase().includes("r$")?n=!0:e==="CAD"&&t.includes("$")&&(n=!0),n&&(i++,s.length<5&&s.push(t))}),i>0&&(t.foundCurrencies[e]=(t.foundCurrencies[e]||0)+i,t.currencyReportStrings.push(`${e}: ${i}${s.length>0?` (примеры: ${s.join(", ")}${i>s.length?", ...":""})`:""}`))}),t.duplicateSentences=Array.from(t.duplicateSentences),t.potentialTypos=Array.from(t.potentialTypos);return t}function l(e){let t=0,n="Не определён",r=!1;for(const i in e.counts)e.counts[i]>t&&(t=e.counts[i],n=i,r=!1),e.counts[i]===t&&t>0&&(r=!0);return{language:r?"Смешанный":n}}function u(e,t){let n=document.getElementById("polycheck-popup");if(n&&n.remove(),n=document.createElement("div"),n.id="polycheck-popup",n.style.cssText="all: initial; position: fixed; top: 10%; right: 20px; width: 420px; max-width: 90%;background: #fff; color: #333; border: 1px solid #ccc; border-radius: 8px;padding: 20px; z-index: 2147483647; box-shadow: 0 8px 16px rgba(0,0,0,0.2);font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif;font-size: 14px; line-height: 1.6; display: flex; flex-direction: column;",(r=document.createElement("div")).style.cssText="font-size: 18px; font-weight: bold; color: #005a9e; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid #eee; text-align: center;",r.innerHTML="PolyCheck <span style=\"font-size: 12px; font-weight: normal; color: #777;\">v1.2.6</span>",n.appendChild(r),r=document.createElement("div"),r.style.cssText="max-height: 60vh; overflow-y: auto; padding-right: 10px; margin-bottom:15px;",i=[],i.push("<strong>Результат анализа:</strong>"),i.push(`Определенный вариант языка: <span style="background-color: #e6f3fa; padding: 2px 5px; border-radius: 3px;">${e.language}</span>`),("Не определён"===e.language||"Смешанный"===e.language)&&i.push("<em>(Определение по орфографическим маркерам. Если результат неточен, проверьте наличие специфических слов ниже.)</em>"),(o=Object.keys(t.orthoMarkerStats.counts).filter(e=>t.orthoMarkerStats.counts[e]>0)).length>0&&(i.push("<br><strong>Орфография (по языкам):</strong>"),o.forEach(e=>{i.push(`\xa0\xa0<strong>${e}:</strong> ${t.orthoMarkerStats.counts[e]} слов(а) (${t.orthoMarkerStats.words[e].join(", ")})`)})),i.push("<br><strong>Анализ iGaming-лексики (возможные несоответствия ГЕО):</strong>"),s=!1,(a=wordMarkers[e.language]?wordMarkers[e.language].map(e=>e.toLowerCase()):[]).forEach(e=>{for(const n in t.wordMarkerStats.counts)t.wordMarkerStats.counts[n]>0&&n!==e.language&&((c=t.wordMarkerStats.words[n].filter(e=>{const t=e.match(/^(.*?)(?= \(\d+\)$)/)[0].toLowerCase();return!a.includes(t)})).length>0&&(i.push(`\xa0\xa0Обнаружены слова, характерные для <strong>${n}</strong> (но не для ${e.language}): ${c.length} (${c.join(", ")})`),s=!0))}),!s&&("Не определён"!==e.language&&"Смешанный"!==e.language)&&i.push("\xa0\xa0<em>Специфическая iGaming-лексика других ГЕО не обнаружена или совпадает с общей/целевой.</em>"),("Не определён"===e.language||"Смешанный"===e.language)&&i.push("\xa0\xa0<em>Язык не определен однозначно, проверьте все найденные маркеры.</em>"),t.duplicateWords.length>0&&(i.push("<br><strong>Повторяющиеся слова (рядом):</strong>"),t.duplicateWords.forEach(e=>i.push(`\xa0\xa0${e}`))),t.duplicateSentences.length>0&&(i.push("<br><strong>Повторяющиеся предложения:</strong>"),t.duplicateSentences.forEach(e=>i.push(`\xa0\xa0<em>"${e}"</em>`))),t.potentialTypos.length>0&&(i.push("<br><strong>Потенциальные опечатки:</strong>"),t.potentialTypos.forEach(e=>i.push(`\xa0\xa0${e}`))),t.hasEnDash&&i.push("<br><strong>Обнаружено короткое тире (–):</strong> Рекомендуется заменить на длинное тире (—) или дефис с пробелами в зависимости от контекста."),t.currencyReportStrings.length>0&&(i.push("<br><strong>Валюты в тексте:</strong>"),t.currencyReportStrings.forEach(e=>i.push(`\xa0\xa0${e}`)),(l=o[e.language])&&(u=Object.keys(t.foundCurrencies),u.includes(l)||u.length>0?i.push(`\xa0\xa0<strong style="color:orange;">Внимание:</strong> Ожидаемая валюта для ${e.language} (${l}) не найдена, но есть другие: ${u.join(", ")}.`):(d=u.filter(e=>e!==l&&t.foundCurrencies[e]>0),d.length>0&&i.push(`\xa0\xa0<strong style="color:orange;">Несоответствие валют:</strong> Для ${e.language} ожидается ${l}, но также найдены: ${d.join(", ")}.`))),"Не определён"!==e.language&&"Смешанный"!==e.language&&i.push("\xa0\xa0<em>Для языка ${e.language} не задана ожидаемая валюта в настройках букмарклета.</em>"))),i.forEach(e=>{const t=document.createElement("div");t.style.padding="3px 0";const n=/([a-zA-Zа-яА-ЯёЁ0-9@$._'-]+(?: [a-zA-Zа-яА-ЯёЁ0-9@$._'-]+)* \(\d+\))/g;e.includes("(")&&e.includes(")")?t.innerHTML=e.replace(n,(e=>{const t=e.match(/^(.*?)(?= \(\d+\)$)/);return t&&t[1]?`<span class="clickable-word" title="Копировать '${t[1]}'" data-copy="${f(t[1])}">${e}</span>`:e})):t.textContent=e,r.appendChild(t)}),document.head.appendChild(document.createElement("style")).textContent=".clickable-word { color: #005a9e; cursor: pointer; text-decoration: underline; }.clickable-word:hover { color: #003366; }.copied-feedback { color: green !important; font-weight: bold; }",r.addEventListener("click",e=>{e.target.classList.contains("clickable-word")&&navigator.clipboard.writeText(e.target.dataset.copy).then(()=>{const t=e.target.textContent;e.target.textContent="Скопировано!",e.target.classList.add("copied-feedback"),setTimeout(()=>{e.target.textContent=t,e.target.classList.remove("copied-feedback")},1500)})}),n.appendChild(r),(i=document.createElement("div")).style.cssText="display: flex; justify-content: flex-end; padding-top: 15px; border-top: 1px solid #eee;",(o=document.createElement("button")).textContent="Копировать отчёт",o.style.cssText="padding: 8px 15px; background-color: #4CAF50; color: white; border: none; border-radius: 5px; cursor: pointer; margin-right: 10px; font-size:13px;",o.onmouseover=()=>o.style.backgroundColor="#45a049",o.onmouseout=()=>o.style.backgroundColor="#4CAF50",o.onclick=()=>{const e=i.map(e=>e.replace(/<[^>]*>/g,"").replace(/ /g," ")).join("\n");navigator.clipboard.writeText(e).then(()=>{o.textContent="Отчёт скопирован!",setTimeout(()=>{o.textContent="Копировать отчёт"},2000)})},(a=document.createElement("button")).textContent="Закрыть",a.style.cssText="padding: 8px 15px; background-color: #f44336; color: white; border: none; border-radius: 5px; cursor: pointer; font-size:13px;",a.onmouseover=()=>a.style.backgroundColor="#e53935",a.onmouseout=()=>a.style.backgroundColor="#f44336",a.onclick=()=>{n.remove(),document.head.querySelector("style")&&document.head.querySelector("style").remove()},i.appendChild(o),i.appendChild(a),n.appendChild(i),(s=document.createElement("div")).style.cssText="text-align: right; font-size: 11px; color: #999; margin-top: 10px;",s.innerHTML='Powered by <a href="https://www.linkedin.com/in/yaroslav-rudyi/" target="_blank" style="color: #005a9e; text-decoration: none;">@yarikbes</a> & Gemini',n.appendChild(s),document.body.appendChild(n)}function f(e){const t=document.createElement("p");return t.appendChild(document.createTextNode(e)),t.innerHTML}async function d(){try{const e=await s();if(e){const t=c(e),n=l(t.orthoMarkerStats);u(n,t)}}catch(e){alert("Произошла ошибка в работе букмарклета: "+e.message),console.error("Ошибка букмарклета PolyCheck:",e)}}d()})();
