(function(){alert('Букмарклет запущен');const igw=['casino bonus','jackpot','cashback','no deposit bonus','withdrawal','balance','live','vip','account','bet','spin','mobile','bonus code','promo code','free spins','rakeback','reload bonus','welcome package','wagering requirements','minimum deposit','bonus funds','bonus percentage','bonus terms','bonus validity','matched deposit','matched reward','tailored offer','activate bonus','claim bonus','exclusive promotion','valid promo code','private event','highroller','cash out','registration bonus','promotions','wagering requirements','rtp','return to player','payout'],om={'en-US':['favorite','color','center','organize','analyze','license','program','catalog'],'en-GB':['favourite','colour','centre','organise','analyse','licence','programme','catalogue'],'pt-PT':['prémio','levantamento','apoio ao cliente','reembolso'],'pt-BR':['prêmio','saque','atendimento ao cliente'],'es-ES':['máquina tragamonedas','dinero','trabajo','hola'],'es-AR':['tragamonedas','guita','laburo','che','boludo'],'de-DE':['spielautomat','lizenz','glücksspielstaatsvertrag'],'de-AT/CH':['glücksspielautomat','konzession','glücksspielgesetz','geldspielgesetz'],'fr-FR':['mise','retrait','joueur'],'fr-CA':['pari','encaissement','joueuse'],'sv-SE':['spel','insättning','uttag','vinst'],'nl-NL':['gokken','inzet','uitbetaling']},wm={'en-US':['wager','cashout','reels','multiplier','wagering requirement','rtp'],'en-GB':['stake','payline','punt','punter','return to player'],'pt-PT':['slot machine','caça-níquel','jogos de sorte','giros grátis','saldo','levantamento mínimo'],'pt-BR':['cassino','jogos de azar','aposta mínima','giros grátis','saldo'],'es-ES':['bote','tiradas gratis','retiro','servicio de atención al cliente','apuesta mínima','juego de mesa','crupier','tragaperras'],'es-AR':['pozo','giros gratis','extracción','cobro','saque','retirar','apuestas deportivas'],'de-DE':['einsatz','auszahlung','freispiele','wettquote','mindesteinsatz','spielregeln','bonusspiel'],'de-AT/CH':['einsatzgrenze','auszahlungen','wette','wettanbieter','spielregeln','bonusspiel'],'sv-SE':['spelautomater','insättning','uttag','vinster','jackpott','kampanjer','betalningsmetoder'],'nl-NL':['gokkasten','welkomstbonus','gratis spins','uitbetaling','storting','klantenservice','mobiel casino','betalningsmethoden'],'fr-FR':['mise','retrait','joueur','pari'],'fr-CA':['pari','encaissement','joueuse','mise','gain']};async function gt(){try{const t=await navigator.clipboard.readText();return t.trim()?t.toLowerCase():(alert('Буфер пуст. Выделите текст, нажмите Ctrl+C, запустите снова.'),'')}catch(e){const t=prompt('Не удалось прочитать буфер обмена. Вставьте текст сюда:', '');return t&&t.trim()?t.toLowerCase():(alert('Текст не введён. Попробуйте снова.'), '')}}function at(t){const c={},w={},oc={},ow={},ig=igw.some(i=>{const escapedI=i.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,'\\$&');return new RegExp('\\b'+escapedI+'\\b','gi').test(t)});for(const l in wm){c[l]=0;w[l]=[];wm[l].forEach(wd=>{const escapedWd=wd.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,'\\$&');const r=new RegExp('\\b'+escapedWd+'\\b','gi'),m=t.match(r);if(m&&(!ig||!igw.includes(wd))){c[l]+=m.length;w[l].push(wd+' ('+m.length+')')}})}for(const l in om){oc[l]=0;ow[l]=[];om[l].forEach(wd=>{const escapedWd=wd.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,'\\$&');const r=new RegExp('\\b'+escapedWd+'\\b','gi'),m=t.match(r);if(m){oc[l]+=m.length;ow[l].push(wd+' ('+m.length+')')}})}return{all:{counts:c,words:w},ortho:{counts:oc,words:ow},isIGaming:ig}}function gl(o){let m=0,l='Не определён';for(const x in o.counts)o.counts[x]>m?(m=o.counts[x],l=x):o.counts[x]===m&&m>0&&(l='Смешанный');return{language:l}}function sp(ld,od,ad,a){let p=document.getElementById('popup');p&&p.remove();p=document.createElement('div');p.id='popup';p.style.cssText='all:initial;position:fixed;top:30%;right:1%;width:380px;max-height:80vh;overflow-y:auto;background:#f9f9f9;color:#333;border:2px solid #0073b1;padding:15px;z-index:9999;box-shadow:0 4px 8px rgba(0,0,0,0.2);font-family:Arial,sans-serif;font-size:14px;line-height:1.5;white-space:pre-wrap;border-radius:3px';const hd=document.createElement('div');hd.style.cssText='padding:5px 0;font-weight:bold;border-bottom:1px solid #0073b1;margin-bottom:10px;text-align:center;';const ttl=document.createElement('span');ttl.textContent='PolyCheck';ttl.style.fontSize='16px';const ver=document.createElement('span');ver.textContent=' v1.0.30';ver.style.fontSize='12px';ver.style.fontWeight='normal';hd.appendChild(ttl);hd.appendChild(ver);p.appendChild(hd);const ls=['Результат анализа:','Вариант языка: '+ld.language,'(определено по орфографическим маркерам)'];const oh=Object.keys(od.counts).filter(l=>od.counts[l]>0);oh.length>0&&(ls.push('Орфография (по языкам):'),oh.forEach(l=>ls.push(l+': '+od.counts[l]+' слов ('+od.words[l].join(', ')+')')));ls.push('iGaming-лексика (для улучшения текста):');for(const l in ad.counts){if(ad.counts[l]>0&&l!==ld.language){const dw=wm[ld.language]||[],odw=om[ld.language]||[],fw=ad.words[l].filter(w=>{const bw=w.match(/^(.*?)(?= \(\d+\)$)/)[0];return !dw.includes(bw)&&!odw.includes(bw);});if(fw.length>0)ls.push(l+': '+fw.length+' слов ('+fw.join(', ')+')')}}ls.forEach(ln=>{const d=document.createElement('div');d.style.cssText='padding:2px;margin-bottom:6px;';if(ln.match(/^[a-z]{2}-[A-Z]{2,3}:/)){d.style.marginLeft='10px';}if(ln.startsWith('Вариант языка:')){d.style.backgroundColor='#e6f3fa';d.style.padding='4px 2px';}d.onmouseover=()=>d.style.backgroundColor=ln.startsWith('Вариант языка:')?'#d4e6f1':'#f0f0f0';d.onmouseout=()=>d.style.backgroundColor=ln.startsWith('Вариант языка:')?'#e6f3fa':'transparent';const pt=ln.split(/([a-zA-Zа-яА-ЯёЁ]+(?: [a-zA-Zа-яА-ЯёЁ]+)* \(\d+\))/g);pt.forEach(pr=>{if(/^[a-zA-Zа-яА-ЯёЁ]+(?: [a-zA-Zа-яА-ЯёЁ]+)* \(\d+\)$/.test(pr)){const wm=pr.match(/^(.*?)(?= \(\d+\)$)/);const[w]=wm;const s=document.createElement('span');s.textContent=pr;s.style.color='#005580';s.style.cursor='pointer';s.style.textDecoration='underline';s.onclick=()=>{navigator.clipboard.writeText(w);s.style.color='#006600';setTimeout(()=>{s.style.color='#005580'},2000)};d.appendChild(s)}else d.appendChild(document.createTextNode(pr))});p.appendChild(d)});const cab=document.createElement('button');cab.textContent='Копировать всё';cab.style.cssText='margin-top:10px;padding:5px 10px;background:#4CAF50;color:#fff;border:none;cursor:pointer;border-radius:3px;margin-right:10px';cab.onclick=()=>{navigator.clipboard.writeText(ls.join('\n'));cab.textContent='Скопировано!';setTimeout(()=>{cab.textContent='Копировать всё'},2000)};const cb=document.createElement('button');cb.textContent='Закрыть';cb.style.cssText='margin-top:10px;padding:5px 10px;background:#f44336;color:#fff;border:none;cursor:pointer;border-radius:3px';cb.onclick=()=>p.remove();p.appendChild(cab);p.appendChild(cb);const ft=document.createElement('div');ft.style.cssText='padding:5px 0;text-align:right;';const link=document.createElement('a');link.href='https://www.linkedin.com/in/yaroslav-rudyi/';link.textContent='@yarikbes';link.target='_blank';link.style.color='#005580';link.style.textDecoration='underline';link.onmouseover=()=>link.style.color='#003366';link.onmouseout=()=>link.style.color='#005580';ft.appendChild(document.createTextNode('Powered by '));ft.appendChild(link);p.appendChild(ft);document.body.appendChild(p)}(async()=>{try{const t=await gt();if(t){const a=at(t);const l=gl(a.ortho);sp(l,a.ortho,a.all,a)}}catch(e){alert('Ошибка: '+e.message)}})();})();
